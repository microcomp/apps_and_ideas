{% ckan_extends %}

{% block content_primary_nav %}
 
{% endblock %}

{% block header_site_navigation_tabs %}
<li> <a href="/" alt="home"><i class='icon-home'></i> </a></li>

{{  h.build_nav_main(
				
                ('search', _('Datasets')),
                ('organizations_index', _('Organizations')),
                ('group_index', _('Groups')),
                ('about', _('About')),
				('apps', _('Applications'))
				
              ) }}
              
  <li> <a href="{{h.xwiki()}}" alt="xwiki url">xwiki </a></li>         
<script type="text/javascript">
function change_style(){
	var style = document.getElementById("contrast");
	if(style.href.indexOf("/high_contrast.css") > -1){ style.href = "/screen.css" }else { style.href = "/high_contrast.css" }
}
</script>
  <li>
   <a onclick="change_style()" href="#">
      <i class="fa fa-edit"></i>{{_("Change contrast")}}
    </a>
  </li>

<!--

-->            
 	{%if  c.controller == 'ckanext.apps_and_ideas.apps:AppsController' %}
		<link rel="stylesheet" type="text/css" href="/box.css" />
		
<!--{{c.controller}}-->
	{%elif c.controller == 'organization'%}
	{%if c.action == 'index'%}
	<link rel="stylesheet" type="text/css" href="/box.css" />
	{%endif%}	
 
	{% elif c.controller == 'related'%}
	{%if c.action == 'list'%}
		<link rel="stylesheet" type="text/css" href="/box.css" />
		 
	{%elif c.action == 'dashboard'%}
		<link rel="stylesheet" type="text/css" href="/box.css" />
		
	{%endif%}
 	{% elif c.controller == 'ckanext.apps_and_ideas.detail:DetailController' %}
		<link rel="stylesheet" type="text/css" href="/box.css" />
	<!-- {{c.controller}} -->
	
	{% elif c.controller == 'organization' %}
		{%if c.action == 'read' %}
			{%elif c.action == 'activity'%}
			{%else%}
				<link rel="stylesheet" type="text/css" href="/box.css" />
				
			{%endif%}
	<!-- {{c.controller}} -->
	{% elif c.controller == 'group' %}

	{%if c.action == 'activity' %}
	{%else%}
		<link rel="stylesheet" type="text/css" href="/box.css" />
		
	{%endif%}
	<!-- {{c.controller}} -->
{%elif c.controller == 'user'%}
	{%if c.action == 'dashboard_organizations' %}
		<link rel="stylesheet" type="text/css" href="/box.css" />
		
	{%elif c.action == 'dashboard_groups' %}
		<link rel="stylesheet" type="text/css" href="/box.css" />
		 
	{%endif%}
{%elif c.controller == 'package'%}
	{%if c.action == 'read' %}
		<link rel="stylesheet" type="text/css" href="/box.css" />
		

<script>
	var rows = document.getElementsByTagName('td')
	var x = "<h3>{{  h.convert_geojson_to_name(c.pkg_dict.get('extras', None)) }}</h3><a onclick='hide()' alt='hide content' class='btn btn-primary'>{{_('Hide')}}</a><br />"
	var ii = 0
	for(var i=0; i < rows.length; i++){
		var text = rows[i].innerHTML
		if(text.substring(0,34)=='{"type": "Polygon", "coordinates":'){

			x += text
			ii = i
			console.log("found")
		}
	}
	
	function start(){
		

		for(var i=0; i < rows.length; i++){
		var text = rows[i].innerHTML
		if(text.substring(0,34)=='{"type": "Polygon", "coordinates":'){
			x += text
			ii = i
			rows[ii].innerHTML = "<h3>{{  h.convert_geojson_to_name(c.pkg_dict.get('extras', None)) }}</h3> <a onclick='show_spatial()' alt='show text' class='btn btn-primary'>{{_('Show')}}</a>"
			
		}
		
	}
		
	}
	function show_spatial(){
			rows[ii].innerHTML = x
	}
	function hide(){
			rows[ii].innerHTML = "<h3>{{  h.convert_geojson_to_name(c.pkg_dict.get('extras', None)) }}</h3>  <a onclick='show_spatial()' alt='show text' class='btn btn-primary'>{{_('Show')}}</a>"
	}
	window.onload = start
	
</script>

	{%endif%}

{%endif%}


{% endblock %}



